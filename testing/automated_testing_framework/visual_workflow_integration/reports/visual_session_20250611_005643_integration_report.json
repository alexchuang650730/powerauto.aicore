{
  "session_metadata": {
    "session_id": "visual_session_20250611_005643",
    "session_name": "Kilo Code企业版视觉集成测试",
    "start_time": "2025-06-11T00:56:43.190472",
    "workflow_recording_id": "recording_95e28283",
    "kilo_recording_id": "recording_75f945f3",
    "kilo_scenario_id": "enterprise_critical_modes",
    "recording_config": {
      "recording_mode": "kilo_code_detection",
      "target_version": "enterprise",
      "enable_visual_verification": true,
      "enable_screenshot": true,
      "auto_generate_n8n": true,
      "recording_quality": "high",
      "max_recording_duration": 300,
      "screenshot_interval": 2.0
    },
    "visual_config": {
      "enable_visual_verification": true,
      "enable_screenshot_comparison": true,
      "enable_regression_testing": true,
      "screenshot_interval": 2.0,
      "visual_threshold": 0.05,
      "auto_update_baseline": true,
      "capture_on_kilo_events": true,
      "capture_on_ui_interactions": true,
      "generate_visual_report": true
    }
  },
  "visual_analysis": {
    "total_visual_events": 0,
    "events_by_type": {},
    "regressions_detected": 0,
    "screenshots_captured": 0,
    "comparisons_performed": 0,
    "baselines_created": 0
  },
  "performance_analysis": {
    "session_duration": 0.002786,
    "average_visual_processing_time": 0.0,
    "workflow_performance": {
      "total_actions": 1,
      "total_kilo_code_events": 0,
      "total_screenshots": 0,
      "average_kilo_code_response_time": 0.0,
      "recording_duration": 0.022248
    },
    "kilo_code_performance": {
      "average_response_time": 1.0,
      "max_response_time": 1.2,
      "min_response_time": 0.8,
      "average_accuracy": 0.95,
      "response_time_compliance": 1.0,
      "accuracy_compliance": 1.0
    }
  },
  "quality_assessment": {
    "visual_quality_score": 0.2,
    "integration_completeness": 0.4,
    "overall_success_rate": 1.0,
    "recommendations": [
      "建议启用视觉验证功能以提高测试覆盖率",
      "建议启用截图对比功能以检测视觉回归"
    ]
  },
  "visual_events": [],
  "workflow_result": {
    "recording_id": "recording_95e28283",
    "recording_name": "Visual_Kilo Code企业版视觉集成测试_kilo_code_detection",
    "recording_mode": "kilo_code_detection",
    "target_version": "enterprise",
    "start_time": "2025-06-11T00:56:43.168427",
    "end_time": "2025-06-11T00:56:43.190675",
    "config": {
      "recording_mode": "kilo_code_detection",
      "target_version": "enterprise",
      "enable_visual_verification": true,
      "enable_screenshot": true,
      "auto_generate_n8n": true,
      "recording_quality": "high",
      "max_recording_duration": 300,
      "screenshot_interval": 2.0
    },
    "actions": [
      {
        "id": "action_001",
        "type": "click",
        "timestamp": "2025-06-11T00:56:43.190625",
        "element_info": {
          "selector": ".kilo-code-panel",
          "text": "智能介入面板",
          "coordinates": null
        },
        "action_data": {
          "click_type": "element"
        },
        "screenshot_path": null,
        "visual_verification": null,
        "metadata": {}
      }
    ],
    "kilo_code_events": [],
    "screenshots": [],
    "visual_verifications": [],
    "statistics": {
      "total_actions": 1,
      "total_kilo_code_events": 0,
      "total_screenshots": 0,
      "average_kilo_code_response_time": 0.0,
      "recording_duration": 0.022248
    },
    "n8n_workflow": {
      "name": "PowerAutomation_kilo_code_detection_recording_95e28283",
      "nodes": [
        {
          "parameters": {},
          "name": "Start",
          "type": "n8n-nodes-base.start",
          "typeVersion": 1,
          "position": [
            240,
            300
          ]
        }
      ],
      "connections": {},
      "active": true,
      "settings": {},
      "staticData": {},
      "meta": {
        "powerautomation_recording_id": "recording_95e28283",
        "recording_mode": "kilo_code_detection",
        "target_version": "enterprise",
        "generated_at": "2025-06-11T00:56:43.191034"
      }
    }
  },
  "kilo_code_result": {
    "scenario_info": {
      "scenario_id": "enterprise_critical_modes",
      "scenario_name": "企业版关键模式测试",
      "target_version": "enterprise",
      "struggle_modes": [
        "StruggleModeType.SYNTAX_ERROR",
        "StruggleModeType.LOGIC_ERROR",
        "StruggleModeType.PERFORMANCE_ISSUE"
      ],
      "expected_interventions": [
        "InterventionType.CODE_SUGGESTION",
        "InterventionType.ERROR_FIX",
        "InterventionType.PERFORMANCE_TIP"
      ],
      "performance_requirements": {
        "max_response_time": 2.5,
        "min_accuracy_rate": 0.9,
        "min_intervention_success_rate": 0.85
      },
      "test_data": {
        "priority": "critical",
        "environment": "production"
      }
    },
    "recording_info": {
      "recording_id": "recording_75f945f3",
      "start_time": "2025-06-11T00:56:43.180009",
      "end_time": "2025-06-11T00:56:43.191385",
      "duration": 0.011376
    },
    "performance_analysis": {
      "average_response_time": 1.0,
      "max_response_time": 1.2,
      "min_response_time": 0.8,
      "average_accuracy": 0.95,
      "response_time_compliance": 1.0,
      "accuracy_compliance": 1.0
    },
    "coverage_analysis": {
      "struggle_mode_coverage": 0.3333333333333333,
      "intervention_coverage": 0.3333333333333333,
      "detected_struggle_modes": [
        "struggle_mode_1"
      ],
      "triggered_interventions": [
        "code_suggestion"
      ],
      "missing_struggle_modes": [
        "struggle_mode_2",
        "struggle_mode_3"
      ],
      "missing_interventions": [
        "error_fix",
        "performance_tip"
      ]
    },
    "quality_assessment": {
      "overall_quality_score": 0.7999999999999999,
      "performance_grade": "A+",
      "coverage_grade": "D",
      "recommendations": [
        "建议增强以下挣扎模式的检测能力: struggle_mode_2, struggle_mode_3",
        "建议完善以下介入类型的触发机制: error_fix, performance_tip"
      ]
    },
    "raw_recording_data": {
      "recording_id": "recording_75f945f3",
      "recording_name": "KiloCode_企业版关键模式测试_kilo_code_detection",
      "recording_mode": "kilo_code_detection",
      "target_version": "enterprise",
      "start_time": "2025-06-11T00:56:43.180009",
      "end_time": "2025-06-11T00:56:43.191385",
      "config": {
        "recording_mode": "kilo_code_detection",
        "target_version": "enterprise",
        "enable_visual_verification": true,
        "enable_screenshot": true,
        "auto_generate_n8n": true,
        "recording_quality": "high",
        "max_recording_duration": 300,
        "screenshot_interval": 2.0
      },
      "actions": [
        {
          "id": "action_001",
          "type": "custom_kilo_code_detection",
          "timestamp": "2025-06-11T00:56:43.190558",
          "element_info": {},
          "action_data": {
            "detection_type": "struggle_mode_1",
            "detection_data": {
              "error_type": "missing_semicolon",
              "line": 42
            },
            "confidence_score": 0.95,
            "response_time": 1.2,
            "event_id": "kilo_event_001"
          },
          "screenshot_path": null,
          "visual_verification": null,
          "metadata": {}
        },
        {
          "id": "action_002",
          "type": "custom_kilo_code_detection",
          "timestamp": "2025-06-11T00:56:43.190649",
          "element_info": {},
          "action_data": {
            "detection_type": "intervention_trigger",
            "detection_data": {
              "intervention_type": "code_suggestion",
              "intervention_data": {
                "suggestion": "添加分号",
                "confidence": 0.95
              },
              "success_rate": 0.9
            },
            "confidence_score": 0.9,
            "response_time": 0.8,
            "event_id": "kilo_event_002"
          },
          "screenshot_path": null,
          "visual_verification": null,
          "metadata": {}
        }
      ],
      "kilo_code_events": [
        {
          "event_id": "kilo_event_001",
          "timestamp": "2025-06-11T00:56:43.190545",
          "detection_type": "struggle_mode_1",
          "detection_data": {
            "error_type": "missing_semicolon",
            "line": 42
          },
          "confidence_score": 0.95,
          "response_time": 1.2,
          "screenshot_path": null,
          "visual_verification": null
        },
        {
          "event_id": "kilo_event_002",
          "timestamp": "2025-06-11T00:56:43.190645",
          "detection_type": "intervention_trigger",
          "detection_data": {
            "intervention_type": "code_suggestion",
            "intervention_data": {
              "suggestion": "添加分号",
              "confidence": 0.95
            },
            "success_rate": 0.9
          },
          "confidence_score": 0.9,
          "response_time": 0.8,
          "screenshot_path": null,
          "visual_verification": null
        }
      ],
      "screenshots": [],
      "visual_verifications": [],
      "statistics": {
        "total_actions": 2,
        "total_kilo_code_events": 2,
        "total_screenshots": 0,
        "average_kilo_code_response_time": 1.0,
        "recording_duration": 0.011376
      },
      "n8n_workflow": {
        "name": "PowerAutomation_kilo_code_detection_recording_75f945f3",
        "nodes": [
          {
            "parameters": {},
            "name": "Start",
            "type": "n8n-nodes-base.start",
            "typeVersion": 1,
            "position": [
              240,
              300
            ]
          },
          {
            "parameters": {
              "detection_type": "struggle_mode_1",
              "detection_data": {
                "error_type": "missing_semicolon",
                "line": 42
              },
              "confidence_score": 0.95,
              "response_time": 1.2,
              "expected_response_time": 3.0,
              "expected_confidence": 0.85
            },
            "name": "KiloCode_struggle_mode_1_1",
            "type": "n8n-nodes-base.function",
            "typeVersion": 1,
            "position": [
              440,
              300
            ]
          },
          {
            "parameters": {
              "detection_type": "intervention_trigger",
              "detection_data": {
                "intervention_type": "code_suggestion",
                "intervention_data": {
                  "suggestion": "添加分号",
                  "confidence": 0.95
                },
                "success_rate": 0.9
              },
              "confidence_score": 0.9,
              "response_time": 0.8,
              "expected_response_time": 3.0,
              "expected_confidence": 0.85
            },
            "name": "KiloCode_intervention_trigger_2",
            "type": "n8n-nodes-base.function",
            "typeVersion": 1,
            "position": [
              640,
              300
            ]
          },
          {
            "parameters": {
              "total_events": 2,
              "average_response_time": 1.0,
              "validation_criteria": {
                "max_response_time": 3.0,
                "min_confidence": 0.85,
                "required_detection_types": [
                  "struggle_mode_1",
                  "struggle_mode_2",
                  "intervention_decision"
                ]
              }
            },
            "name": "Validation",
            "type": "n8n-nodes-base.function",
            "typeVersion": 1,
            "position": [
              840,
              300
            ]
          }
        ],
        "connections": {
          "Start": {
            "main": [
              [
                {
                  "node": "KiloCode_struggle_mode_1_1",
                  "type": "main",
                  "index": 0
                }
              ]
            ]
          },
          "KiloCode_struggle_mode_1_1": {
            "main": [
              [
                {
                  "node": "KiloCode_intervention_trigger_2",
                  "type": "main",
                  "index": 0
                }
              ]
            ]
          },
          "KiloCode_intervention_trigger_2": {
            "main": [
              [
                {
                  "node": "Validation",
                  "type": "main",
                  "index": 0
                }
              ]
            ]
          }
        },
        "active": true,
        "settings": {},
        "staticData": {},
        "meta": {
          "powerautomation_recording_id": "recording_75f945f3",
          "recording_mode": "kilo_code_detection",
          "target_version": "enterprise",
          "generated_at": "2025-06-11T00:56:43.191774"
        }
      }
    }
  },
  "generated_at": "2025-06-11T00:56:43.193271",
  "n8n_workflow_path": "/home/ubuntu/projects/Powerauto.ai/test/visual_workflow_integration/n8n_workflows/kilo_code/PowerAutomation_KiloCode_Visual_Kilo_Code企业版视觉集成测试_kilo_code_detection_enterprise_20250611_005643.json"
}